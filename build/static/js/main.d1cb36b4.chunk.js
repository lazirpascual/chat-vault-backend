(this["webpackJsonpchat-vault"]=this["webpackJsonpchat-vault"]||[]).push([[0],{114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},119:function(e,t,s){},120:function(e,t,s){},121:function(e,t,s){},122:function(e,t,s){},123:function(e,t,s){},124:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(74),r=s.n(a),i=(s(84),s(169)),o=s(170),l=s(171),u=s(172),j=s(15),d=s(4),b=s(25),p=s(26),h=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:[].concat(Object(b.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{user:Object(p.a)(Object(p.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},m=s(0),O={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},f=Object(c.createContext)(O),x=function(e){var t=e.children,s=Object(c.useReducer)(h,O),n=Object(d.a)(s,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(m.jsx)(f.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:r},children:t})},v=function(e){return{type:"FOLLOW",payload:e}},g=function(){var e=Object(c.useContext)(f),t=e.user,s=e.dispatch,n="http://localhost:3001/images/";return Object(m.jsxs)("div",{className:"topbarContainer",children:[Object(m.jsx)("div",{className:"topbarLeft",children:Object(m.jsx)(j.b,{to:"/",style:{textDecoration:"none"},children:Object(m.jsx)("span",{className:"logo",children:"Chat Vault"})})}),Object(m.jsx)("div",{className:"topbarCenter",children:Object(m.jsxs)("div",{className:"searchBar",children:[Object(m.jsx)(i.a,{className:"searchIcon"}),Object(m.jsx)("input",{placeholder:"Search for friend, post or video",className:"searchInput"})]})}),Object(m.jsxs)("div",{className:"topbarRight",children:[Object(m.jsxs)("div",{className:"topbarLinks",children:[Object(m.jsx)(j.b,{to:"/",style:{textDecoration:"none",color:"white"},children:Object(m.jsx)("span",{className:"topbarLink",children:"Home"})}),Object(m.jsx)("span",{className:"topbarLink",onClick:function(e){window.localStorage.removeItem("user"),s({type:"LOGOUT"})},children:"Log Out"})]}),Object(m.jsxs)("div",{className:"topbarIcons",children:[Object(m.jsxs)("div",{className:"topbarIconItem",children:[Object(m.jsx)(o.a,{}),Object(m.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(m.jsx)(j.b,{to:"/messenger",style:{textDecoration:"none",color:"white"},children:Object(m.jsxs)("div",{className:"topbarIconItem",children:[Object(m.jsx)(l.a,{}),Object(m.jsx)("span",{className:"topbarIconBadge",children:"2"})]})}),Object(m.jsxs)("div",{className:"topbarIconItem",children:[Object(m.jsx)(u.a,{}),Object(m.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]})]}),Object(m.jsx)(j.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t.username),children:Object(m.jsx)("img",{src:(null===t||void 0===t?void 0:t.profilePicture)?"".concat(n).concat(null===t||void 0===t?void 0:t.profilePicture):"".concat(n,"person/noAvatar.png"),alt:"",className:"topbarImg"})})]})},N=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}],I=(s(93),s(173)),w=s(174),y=s(175),k=s(176),C=s(177),S=s(178),P=s(179),F=s(180),L=(s(94),function(e){var t=e.user;return Object(m.jsxs)("li",{className:"sidebarFriend",children:[Object(m.jsx)("img",{src:"http://localhost:3001/images/"+t.profilePicture,alt:"",className:"sidebarFriendImg"}),Object(m.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}),_=[{icon:Object(m.jsx)(I.a,{className:"sidebarIcon"}),name:"Feed"},{icon:Object(m.jsx)(l.a,{className:"sidebarIcon"}),name:"Chats"},{icon:Object(m.jsx)(w.a,{className:"sidebarIcon"}),name:"Videos"},{icon:Object(m.jsx)(y.a,{className:"sidebarIcon"}),name:"Groups"},{icon:Object(m.jsx)(k.a,{className:"sidebarIcon"}),name:"Bookmarks"},{icon:Object(m.jsx)(C.a,{className:"sidebarIcon"}),name:"Questions"},{icon:Object(m.jsx)(S.a,{className:"sidebarIcon"}),name:"Jobs"},{icon:Object(m.jsx)(P.a,{className:"sidebarIcon"}),name:"Events"},{icon:Object(m.jsx)(F.a,{className:"sidebarIcon"}),name:"Courses"}],T=function(){return Object(m.jsx)("div",{className:"sidebar",children:Object(m.jsxs)("div",{className:"sidebarWrapper",children:[Object(m.jsx)("ul",{className:"sidebarList",children:_.map((function(e){return Object(m.jsxs)("li",{className:"sidebarListItem",children:[e.icon,Object(m.jsx)("span",{children:e.name})]},e.name)}))}),Object(m.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(m.jsx)("hr",{className:"sidebarHr"}),Object(m.jsx)("ul",{className:"sidebarFriendList",children:N.map((function(e){return Object(m.jsx)(L,{user:e},e.id)}))})]})})},B=s(3),R=s.n(B),E=s(6),A=s(181),U=s(182),D=s(183),W=s(185),V=s(184),G=(s(96),s(5)),M=s.n(G),q=[{icon:Object(m.jsx)(A.a,{htmlColor:"blue",className:"shareIcon"}),name:"Tag"},{icon:Object(m.jsx)(U.a,{htmlColor:"green",className:"shareIcon"}),name:"Location"},{icon:Object(m.jsx)(D.a,{htmlColor:"goldrenrod",className:"shareIcon"}),name:"Reaction"}],H=function(){var e=Object(c.useContext)(f).user,t="http://localhost:3001/images/",s=Object(c.useRef)(),n=Object(c.useState)(null),a=Object(d.a)(n,2),r=a[0],i=a[1],o=function(){var t=Object(E.a)(R.a.mark((function t(c){var n,a,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),n={userId:e._id,desc:s.current.value},!r){t.next=16;break}return a=new FormData,i=Date.now()+r.name,a.append("name",i),a.append("file",r),n.img=i,t.prev=8,t.next=11,M.a.post("/upload",a);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),console.log(t.t0);case 16:return t.prev=16,t.next=19,M.a.post("/posts",n);case 19:window.location.reload(),t.next=25;break;case 22:t.prev=22,t.t1=t.catch(16),console.log(t.t1);case 25:case"end":return t.stop()}}),t,null,[[8,13],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"share",children:Object(m.jsxs)("div",{className:"shareWrapper",children:[Object(m.jsxs)("div",{className:"shareTop",children:[Object(m.jsx)("img",{src:e.profilePicture?"".concat(t).concat(e.profilePicture):"".concat(t,"person/noAvatar.png"),alt:"Profile",className:"shareProfileImg"}),Object(m.jsx)("input",{placeholder:"What's on your mind, ".concat(e.username,"?"),className:"shareInput",ref:s})]}),Object(m.jsx)("hr",{className:"shareHr"}),r&&Object(m.jsxs)("div",{className:"shareImgContainer",children:[Object(m.jsx)("img",{src:URL.createObjectURL(r),alt:"",className:"shareImg"}),Object(m.jsx)(V.a,{className:"shareCancel",onClick:function(){return i(null)}})]}),Object(m.jsxs)("form",{className:"shareBottom",onSubmit:o,children:[Object(m.jsxs)("div",{className:"shareOptions",children:[Object(m.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(m.jsx)(W.a,{htmlColor:"tomato",className:"shareIcon"}),Object(m.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(m.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png, .jpg, .jpeg",onChange:function(e){return i(e.target.files[0])}})]}),q.map((function(e){return Object(m.jsxs)("div",{className:"shareOption",children:[e.icon,Object(m.jsx)("span",{className:"shareOptionText",children:e.name})]},e.name)}))]}),Object(m.jsx)("button",{type:"submit",className:"shareButton",children:"Share"})]})]})})},J=s(41),K=s(186),z=(s(114),function(e){var t=e.post,s=Object(c.useState)(t.likes?t.likes.length:0),n=Object(d.a)(s,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(c.useState)({}),p=Object(d.a)(b,2),h=p[0],O=p[1],x=Object(c.useContext)(f).user,v="http://localhost:3001/images/";Object(c.useEffect)((function(){u(t.likes.includes(null===x||void 0===x?void 0:x._id))}),[null===x||void 0===x?void 0:x._id,t.likes]),Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("/users?userId=".concat(t.userId));case 2:s=e.sent,O(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var g=function(){var e=Object(E.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.put("/posts/".concat(t._id,"/like"),{userId:x._id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:r(l?a-1:a+1),u(!l);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"post",children:Object(m.jsxs)("div",{className:"postWrapper",children:[Object(m.jsxs)("div",{className:"postTop",children:[Object(m.jsxs)("div",{className:"postTopLeft",children:[Object(m.jsx)(j.b,{to:"profile/".concat(h.username),children:Object(m.jsx)("img",{src:h.profilePicture?v+h.profilePicture:v+"person/noAvatar.png",alt:"Profile",className:"postProfileImg"})}),Object(m.jsx)("span",{className:"postUsername",children:h.username}),Object(m.jsx)("span",{className:"postDate",children:Object(J.a)(t.createdAt)})]}),Object(m.jsx)("div",{className:"postTopRight",children:Object(m.jsx)(K.a,{})})]}),Object(m.jsxs)("div",{className:"postCenter",children:[Object(m.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(m.jsx)("img",{src:v+t.img,alt:"Post",className:"postImg"})]}),Object(m.jsxs)("div",{className:"postBottom",children:[Object(m.jsxs)("div",{className:"postBottomLeft",children:[Object(m.jsx)("img",{className:"likeIcon",src:"".concat(v,"like.png"),onClick:g,alt:""}),Object(m.jsx)("img",{className:"likeIcon",src:"".concat(v,"heart.png"),onClick:g,alt:""}),Object(m.jsxs)("span",{className:"postLikeCounter",children:[a," People liked this post"]})]}),Object(m.jsx)("div",{className:"postBottomRight",children:Object(m.jsxs)("span",{className:"postCommentText",children:[t.comment," ",t.comment>1?"comments":"comment"]})})]})]})})}),Q=(s(115),function(e){var t=e.username,s=Object(c.useState)([]),n=Object(d.a)(s,2),a=n[0],r=n[1],i=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,M.a.get("/posts/profile/".concat(t));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,M.a.get("posts/timeline/".concat(i._id));case 8:e.t0=e.sent;case 9:s=e.t0,r(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,null===i||void 0===i?void 0:i._id]),Object(m.jsx)("div",{className:"feed",children:Object(m.jsxs)("div",{className:"feedWrapper",children:[(!t||t===(null===i||void 0===i?void 0:i.username))&&Object(m.jsx)(H,{}),a.map((function(e){return Object(m.jsx)(z,{post:e},e._id)}))]})})}),X=(s(116),function(e){var t=e.user;return Object(m.jsxs)("li",{className:"rightbarFriend",children:[Object(m.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(m.jsx)("img",{src:"http://localhost:3001/images/"+t.profilePicture,alt:"",className:"rightbarProfileImg"}),Object(m.jsx)("span",{className:"rightbarOnline"})]}),Object(m.jsx)("span",{className:"rightbarUsername",children:t.username})]})}),Y=s(187),Z=s(188),$=(s(117),function(e){var t=e.user,s="http://localhost:3001/images/",n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],i=a[1],o=Object(c.useContext)(f),l=o.user,u=o.dispatch,b=Object(c.useState)(!1),p=Object(d.a)(b,2),h=p[0],O=p[1];Object(c.useEffect)((function(){O(null===l||void 0===l?void 0:l.followings.includes("".concat(null===t||void 0===t?void 0:t._id)))}),[t,l]),Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(s){var c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/users/friends/".concat(t._id));case 3:c=e.sent,i(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}})()()}),[t,h,null===l||void 0===l?void 0:l.followings]);var x=function(){var e=Object(E.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!h){e.next=7;break}return e.next=4,M.a.put("/users/".concat(t._id,"/unfollow"),{userId:l._id});case 4:u({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,M.a.put("/users/".concat(t._id,"/follow"),{userId:l._id});case 9:u(v(t._id));case 10:O(!h),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"rightbar",children:Object(m.jsx)("div",{className:"rightbarWrapper",children:t?Object(m.jsxs)(m.Fragment,{children:[t.username!==(null===l||void 0===l?void 0:l.username)&&Object(m.jsxs)("button",{className:"rightbarFollowButton",onClick:x,children:[h?"Unfollow":"Follow",h?Object(m.jsx)(Y.a,{}):Object(m.jsx)(Z.a,{})]}),Object(m.jsx)("h4",{className:"rightbarTitle",children:"User Information"}),Object(m.jsxs)("div",{className:"rightbarInfo",children:[Object(m.jsxs)("div",{className:"rightbarInfoItem",children:[Object(m.jsx)("span",{className:"rightbarInfoKey",children:"Current City:"}),Object(m.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(m.jsxs)("div",{className:"rightbarInfoItem",children:[Object(m.jsx)("span",{className:"rightbarInfoKey",children:"Hometown:"}),Object(m.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(m.jsxs)("div",{className:"rightbarInfoItem",children:[Object(m.jsx)("span",{className:"rightbarInfoKey",children:"Relationship Status:"}),Object(m.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":2===t.relationship?"Married":"-"})]})]}),Object(m.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(m.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(m.jsx)(j.b,{to:"/profile/".concat(e.username),style:{textDecoration:"none"},children:Object(m.jsxs)("div",{className:"rightbarFollowing",children:[Object(m.jsx)("img",{src:e.profilePicture?"".concat(s).concat(e.profilePicture):"".concat(s,"person/noAvatar.png"),alt:"",className:"rightbarFollowingImg"}),Object(m.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})},e.username)}))})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"birthdayContainer",children:[Object(m.jsx)("img",{src:"".concat(s,"gift.png"),alt:"",className:"birthdayImg"}),Object(m.jsxs)("span",{className:"birthdayText",children:[Object(m.jsx)("b",{children:"Pola Foster"})," and ",Object(m.jsx)("b",{children:"3 others"})," have a birthday today."]})]}),Object(m.jsx)("a",{href:"https://cloudcomputers.netlify.app",children:Object(m.jsx)("img",{src:"".concat(s,"cloudcomputers.jpg"),alt:"",className:"rightbarAd"})}),Object(m.jsx)("h3",{className:"rightbarTitle",children:"Online Friends"}),Object(m.jsx)("ul",{className:"rightbarFriendList",children:N.map((function(e){return Object(m.jsx)(X,{user:e},e.id)}))})]})})})}),ee=(s(118),function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{}),Object(m.jsxs)("div",{className:"homeContainer",children:[Object(m.jsx)(T,{}),Object(m.jsx)(Q,{}),Object(m.jsx)($,{})]})]})}),te=(s(119),function(){var e=Object(E.a)(R.a.mark((function e(t,s){var c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,M.a.post("/auth/login",t);case 4:c=e.sent,s({type:"LOGIN_SUCCESS",payload:c.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}()),se=function(){var e=Object(E.a)(R.a.mark((function e(t){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post("/auth/register",t);case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=s(189),ne=s(7);function ae(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(f),n=s.isFetching,a=s.dispatch,r=Object(ne.g)();return Object(m.jsx)("div",{className:"login",children:Object(m.jsxs)("div",{className:"loginWrapper",children:[Object(m.jsxs)("div",{className:"loginLeft",children:[Object(m.jsx)("h3",{className:"loginLogo",children:"Chat Vault"}),Object(m.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Chat Vault."})]}),Object(m.jsx)("div",{className:"loginRight",children:Object(m.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),te({email:e.current.value,password:t.current.value},a)},children:[Object(m.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(m.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(m.jsx)("button",{className:"loginButton",type:"submit",disabled:n,children:n?Object(m.jsx)(ce.a,{color:"white",size:"20px"}):"Log In"}),Object(m.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(m.jsx)("button",{className:"loginRegisterButton",onClick:function(){return r.push("/register")},children:n?Object(m.jsx)(ce.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}s(120);function re(){var e="http://localhost:3001/images/",t=Object(c.useState)({}),s=Object(d.a)(t,2),n=s[0],a=s[1],r=Object(ne.h)().username;return Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("/users/?username=".concat(r));case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{}),Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(T,{}),Object(m.jsxs)("div",{className:"profileRight",children:[Object(m.jsxs)("div",{className:"profileRightTop",children:[Object(m.jsxs)("div",{className:"profileCover",children:[Object(m.jsx)("img",{className:"profileCoverImg",src:n.coverPicture?"".concat(e).concat(n.coverPicture):"".concat(e,"person/noCover.png"),alt:"Cover"}),Object(m.jsx)("img",{className:"profileUserImg",src:n.profilePicture?"".concat(e).concat(n.profilePicture):"".concat(e,"person/noAvatar.png"),alt:"Profile"})]}),Object(m.jsxs)("div",{className:"profileInfo",children:[Object(m.jsx)("h4",{className:"profileInfoName",children:n.username}),Object(m.jsx)("span",{className:"profileInfoDesc",children:n.desc})]})]}),Object(m.jsxs)("div",{className:"profileRightBottom",children:[Object(m.jsx)(Q,{username:r}),Object(m.jsx)($,{user:n})]})]})]})]})}s(121);var ie=function(){var e=Object(c.useContext)(f).dispatch,t=Object(c.useRef)(),s=Object(c.useRef)(),n=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(ne.g)(),i=function(){var c=Object(E.a)(R.a.mark((function c(i){var o,l,u;return R.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(i.preventDefault(),a.current.value===n.current.value){c.next=5;break}n.current.setCustomValidity("The password you entered does not match."),c.next=17;break;case 5:return o={username:t.current.value,email:s.current.value,password:n.current.value},c.prev=6,c.next=9,se(o);case 9:l=c.sent,u=te({email:s.current.value,password:n.current.value},e),l&&u&&r.push("/"),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),console.log(c.t0);case 17:case"end":return c.stop()}}),c,null,[[6,14]])})));return function(e){return c.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"login",children:Object(m.jsxs)("div",{className:"loginWrapper",children:[Object(m.jsxs)("div",{className:"loginLeft",children:[Object(m.jsx)("h3",{className:"loginLogo",children:"Chat Vault"}),Object(m.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Chat Vault"})]}),Object(m.jsx)("div",{className:"loginRight",children:Object(m.jsxs)("form",{className:"loginBox",onSubmit:i,children:[Object(m.jsx)("input",{required:!0,placeholder:"Full Name",ref:t,className:"loginInput"}),Object(m.jsx)("input",{required:!0,placeholder:"Email",ref:s,className:"loginInput",type:"email"}),Object(m.jsx)("input",{required:!0,placeholder:"Password",ref:n,className:"loginInput",type:"password",minLength:"6"}),Object(m.jsx)("input",{required:!0,placeholder:"Enter Password Again",ref:a,className:"loginInput",type:"password"}),Object(m.jsx)("span",{className:"loginForgot",onClick:function(){return r.push("/login")},children:"Already have an account? Log in"}),Object(m.jsx)("button",{type:"submit",className:"loginButton",children:"Sign Up"})]})})]})})},oe=(s(122),function(e){var t=e.onlineUsers,s=e.currentId,n=e.setCurrentChat,a="http://localhost:3001/images/",r=Object(c.useState)([]),i=Object(d.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)([]),j=Object(d.a)(u,2),b=j[0],p=j[1];Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/users/friends/".concat(s));case 3:t=e.sent,l(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(c.useEffect)((function(){p(o.filter((function(e){return t.includes(e._id)})))}),[t,o]);var h=function(){var e=Object(E.a)(R.a.mark((function e(t){var c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/conversations/find/".concat(s,"/").concat(t._id));case 3:c=e.sent,n(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"chatOnline",children:[Object(m.jsx)("h3",{className:"rightbarTitle",children:"Online Friends"}),b.map((function(e){return Object(m.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return h(e)},children:[Object(m.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(m.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?a+e.profilePicture:"".concat(a,"person/noAvatar.png"),alt:"Avatar"}),Object(m.jsx)("div",{className:"chatOnlineBadge"})]}),Object(m.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]},e._id)}))]})}),le=(s(123),function(e){var t=e.conversation,s=e.currentUser,n=Object(c.useState)(null),a=Object(d.a)(n,2),r=a[0],i=a[1],o="http://localhost:3001/images/";return Object(c.useEffect)((function(){var e=t.members.find((function(e){return e!==s._id}));(function(){var t=Object(E.a)(R.a.mark((function t(){var s;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M()("/users/?userId=".concat(e));case 3:s=t.sent,i(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[s,t]),Object(m.jsxs)("div",{className:"conversation",children:[Object(m.jsx)("img",{src:(null===r||void 0===r?void 0:r.profilePicture)?"".concat(o).concat(r.profilePicture):"".concat(o,"person/noAvatar.png"),alt:"",className:"conversationImg"}),Object(m.jsx)("span",{className:"conversationName",children:null===r||void 0===r?void 0:r.username})]})}),ue=(s(124),function(e){var t=e.own,s=e.message,n=Object(c.useState)(null),a=Object(d.a)(n,2),r=a[0],i=a[1],o="http://localhost:3001/images/";return Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M()("/users/?userId=".concat(s.sender));case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(m.jsxs)("div",{className:t?"message own":"message",children:[Object(m.jsxs)("div",{className:"messageTop",children:[Object(m.jsx)("img",{className:"messageImg",src:(null===r||void 0===r?void 0:r.profilePicture)?o+(null===r||void 0===r?void 0:r.profilePicture):"".concat(o,"person/noAvatar.png"),alt:""}),Object(m.jsx)("p",{className:"messageText",children:s.text})]}),Object(m.jsx)("div",{className:"messageBottom",children:Object(J.a)(s.createdAt)})]})}),je=s(78),de=(s(154),function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),s=Object(d.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(null),i=Object(d.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(""),j=Object(d.a)(u,2),p=j[0],h=j[1],O=Object(c.useState)(null),x=Object(d.a)(O,2),v=x[0],N=x[1],I=Object(c.useState)(null),w=Object(d.a)(I,2),y=w[0],k=w[1],C=Object(c.useState)([]),S=Object(d.a)(C,2),P=S[0],F=S[1],L=Object(c.useRef)(),_=Object(c.useRef)();Object(c.useEffect)((function(){L.current=Object(je.io)("ws://localhost:3001"),L.current.on("getMessage",(function(e){N({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(c.useEffect)((function(){v&&(null===o||void 0===o?void 0:o.members.includes(v.sender))&&k((function(e){return[].concat(Object(b.a)(e),[v])}))}),[v,o]),Object(c.useEffect)((function(){L.current.emit("addUser",e._id),L.current.on("getUsers",(function(t){F(null===e||void 0===e?void 0:e.followings.filter((function(e){return t.some((function(t){return t.userId===e}))})))}))}),[e]),Object(c.useEffect)((function(){(function(){var t=Object(E.a)(R.a.mark((function t(){var s;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.get("/conversations/".concat(e._id));case 3:s=t.sent,a(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e._id]),Object(c.useEffect)((function(){(function(){var e=Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get("/messages/".concat(null===o||void 0===o?void 0:o._id));case 3:t=e.sent,k(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(c.useEffect)((function(){var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"})}),[y]);var T=function(){var t=Object(E.a)(R.a.mark((function t(s){var c,n,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),c={sender:e._id,text:p,conversationId:o._id},n=o.members.find((function(t){return t!==e._id})),L.current.emit("sendMessage",{senderId:e._id,receiverId:n,text:p}),t.prev=4,t.next=7,M.a.post("/messages",c);case 7:a=t.sent,k([].concat(Object(b.a)(y),[a.data])),h(""),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{}),Object(m.jsxs)("div",{className:"messenger",children:[Object(m.jsx)("div",{className:"chatMenu",children:Object(m.jsxs)("div",{className:"chatMenuWrapper",children:[Object(m.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),n.map((function(t){return Object(m.jsx)("div",{onClick:function(){return l(t)},children:Object(m.jsx)(le,{conversation:t,currentUser:e})},t._id)}))]})}),Object(m.jsx)("div",{className:"chatBox",children:Object(m.jsx)("div",{className:"chatBoxWrapper",children:o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"chatBoxTop",children:y.map((function(t){return Object(m.jsx)("div",{ref:_,children:Object(m.jsx)(ue,{message:t,own:t.sender===e._id})},t._id)}))}),Object(m.jsxs)("form",{className:"chatBoxBottom",onSubmit:T,children:[Object(m.jsx)("input",{value:p,className:"chatMessageInput",placeholder:"Type your message here...",onChange:function(e){return h(e.target.value)}}),Object(m.jsx)("button",{type:"submit",className:"chatSubmitButton",children:"Send"})]})]}):Object(m.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat"})})}),Object(m.jsx)("div",{className:"chatOnline",children:Object(m.jsx)("div",{className:"chatOnlineWrapper",children:Object(m.jsx)(oe,{onlineUsers:P,currentId:e._id,setCurrentChat:l})})})]})]})});var be=function(){var e=Object(c.useContext)(f).user;return Object(m.jsx)(j.a,{children:Object(m.jsxs)(ne.d,{children:[Object(m.jsx)(ne.b,{exact:!0,path:"/",children:e?Object(m.jsx)(ee,{}):Object(m.jsx)(ae,{})}),Object(m.jsx)(ne.b,{path:"/login",children:e?Object(m.jsx)(ne.a,{to:"/"}):Object(m.jsx)(ae,{})}),Object(m.jsx)(ne.b,{path:"/register",children:e?Object(m.jsx)(ne.a,{to:"/"}):Object(m.jsx)(ie,{})}),Object(m.jsx)(ne.b,{path:"/messenger",children:e?Object(m.jsx)(de,{}):Object(m.jsx)(ne.a,{to:"/"})}),Object(m.jsx)(ne.b,{path:"/profile/:username",children:e?Object(m.jsx)(re,{}):Object(m.jsx)(ae,{})})]})})};r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(x,{children:Object(m.jsx)(be,{})})}),document.getElementById("root"))},84:function(e,t,s){},93:function(e,t,s){},94:function(e,t,s){},96:function(e,t,s){}},[[155,1,2]]]);
//# sourceMappingURL=main.d1cb36b4.chunk.js.map